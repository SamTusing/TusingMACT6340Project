<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="/images/plague-doc.jpg">
  <title>Whales</title>
  <meta name="author" content="Samantha J. Tusing">
  <!-- <meta name="description" content="A page to contact artist."> -->

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/featuredstyle.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
</head>

<body>
  <!-- Header -->
 <header>
  <%- include('header'); %>
  </header>

    <main>
    <div class="spacer"></div>
    <div class="display-5 justify-content-center text-center text-black">Whales</div>


   
    
    <style>
      body {
        margin: 0;
        background-color: rgb(188, 174, 146);
      }
      canvas {
        display: block;
      }
    </style>


    <script>
      let whale1, whale2, whale3;
      const scale = 0.4;
      let bubbleSystems = [];

      function preload() {
        whale1 = loadImage("./Assets/whale1.png");
        whale2 = loadImage("./Assets/whale2.png");
        whale3 = loadImage("./Assets/whale3.png");
      }

      function setup() {
  createCanvas(1500, 600);
  imageMode(CORNER);

  const sw = whale1.width * scale;
  const sh = whale1.height * scale;

  // Whale positions
  const whalePositions = [
    { x: 50, y: 175 },
    { x: 400, y: 290 },
    { x: 800, y: 175 }
  ];

  // Create bubble systems â€” one per whale
  whalePositions.forEach((pos, i) => {
    let emitterX = pos.x + sw / 2;
    let emitterY = pos.y - 10;
    bubbleSystems.push(new BubbleSystem(emitterX, emitterY));
  });

  // Adjust origins individually AFTER creation:
  // Middle emitter (index 1)
  bubbleSystems[1].origin.x += 40;
  bubbleSystems[1].origin.y += 130;

  // Right emitter (index 2)
  bubbleSystems[2].origin.x -= 40;
  bubbleSystems[2].origin.y += 95;

  // Left emitter (index 0)
  bubbleSystems[0].origin.x -= 50;
  bubbleSystems[0].origin.y += 90;

  textFont('Times New Roman');
  textSize(30);
  fill(255);
}

      function draw() {
        background(188, 174, 146);

        // Draw whales
        const sw = whale1.width * scale;
        const sh = whale1.height * scale;
        image(whale1, 50, 175, sw, sh);
        image(whale2, 400, 290, sw, sh);
        image(whale3, 800, 175, sw, sh);

        // Title
        fill(255);
        text("call me ishmael", 50, 50);

        // Update and show bubbles
        for (let system of bubbleSystems) {
          system.addBubble();
          system.update();
        }
      }

      // -------- Bubble Classes -------- //

      class Bubble {
        constructor(x, y) {
          this.pos = createVector(x, y);
          this.vel = createVector(random(-0.5, 0.5), random(-2, -1));
          this.lifetime = 255;
          this.size = random(5, 10);
          this.gray = random(100, 255);
        }

        update() {
          this.pos.add(this.vel);
          this.lifetime -= 2;
        }

        display() {
          noStroke();
          fill(this.gray, this.lifetime);
          ellipse(this.pos.x, this.pos.y, this.size);
        }

        isDead() {
          return this.lifetime <= 0;
        }
      }

      class BubbleSystem {
        constructor(x, y) {
          this.origin = createVector(x, y);
          this.bubbles = [];
          
        }

        addBubble() {
          this.bubbles.push(new Bubble(this.origin.x + random(-20, 20), this.origin.y));
        }

        update() {
          for (let i = this.bubbles.length - 1; i >= 0; i--) {
            let b = this.bubbles[i];
            b.update();
            b.display();
            if (b.isDead()) {
              this.bubbles.splice(i, 1);
            }
          }
        }
      }
    </script>



     <!-- Footer -->
 <div class="container-fluid">
    <%- include('footer'); %>
  </div>
    </body>
    </html>