<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="/images/plague-doc.jpg">
  <title>MACT Projects</title>

  <!-- Fonts + Bootstrap -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Your external CSS -->
  <link rel="stylesheet" href="/css/MACTProjectstyle.css">

  <style>
    body {
      margin: 0;
      background-color: #000;
      overflow-x: hidden;
    }
    canvas { display: block; }
  </style>
</head>

<body>

<header>
  <%- include('header'); %>
</header>


<!-- ⭐ FIXED BACKGROUND STARFIELD -->
<div id="starfield-background">
  <div id="star-container"></div>
</div>


<!-- ⭐ FOREGROUND CONTENT -->
<!-- <main class="text-center text-white gallery-section">
  <div class="spacer"></div> -->
  <main>
    <div class="display-5 text-center text-white">MACT Projects</div>
    <div class="spacer"></div>
  </main>

  <!-- ⭐ GALLERY GRID -->
  <div class="gallery-grid">

    <!-- Example gallery items — replace or add your own -->
    <div class="gallery-item">
      <img src="https://tusing-nft-mint-cdn.sfo3.cdn.digitaloceanspaces.com/images/hexagon.jpg" alt="MACT Example" onclick="openModal(this.src)">
      <div class="gallery-caption">Hexagonal Mapping version 1</div>
    </div>

    <div class="gallery-item">
      <img src="https://tusing-nft-mint-cdn.sfo3.cdn.digitaloceanspaces.com/images/midterm%205.jpg" alt="MACT Example" onclick="openModal(this.src)">
      <div class="gallery-caption">Hexagonal Mapping version 2</div>
    </div>

      <div class="gallery-item">
      <img src="https://tusing-nft-mint-cdn.sfo3.cdn.digitaloceanspaces.com/images/Lines1.jpg" alt="MACT Example" onclick="openModal(this.src)">
      <div class="gallery-caption">Line Study 1</div>
    </div>

      <div class="gallery-item">
      <img src="https://tusing-nft-mint-cdn.sfo3.cdn.digitaloceanspaces.com/images/Lines4.jpg" alt="MACT Example" onclick="openModal(this.src)">
      <div class="gallery-caption">Line Study 2</div>
    </div>

      <div class="gallery-item">
      <img src="https://tusing-nft-mint-cdn.sfo3.cdn.digitaloceanspaces.com/images/Lines5.jpg" alt="MACT Example" onclick="openModal(this.src)">
      <div class="gallery-caption">Line Study 3</div>
    </div>

      <div class="gallery-item">
      <img src="https://tusing-nft-mint-cdn.sfo3.cdn.digitaloceanspaces.com/images/screenshot%20pp.png" alt="MACT Example" onclick="openModal(this.src)">
      <div class="gallery-caption">A Happy Mistake!</div>
    </div>

       <div class="gallery-item">
      <img src="https://tusing-nft-mint-cdn.sfo3.cdn.digitaloceanspaces.com/images/screenshot_.jpg" alt="MACT Example" onclick="openModal(this.src)">
      <div class="gallery-caption">Random Generation version 1</div>
    </div>

       <div class="gallery-item">
      <img src="https://tusing-nft-mint-cdn.sfo3.cdn.digitaloceanspaces.com/images/screenshot3.jpg" alt="MACT Example" onclick="openModal(this.src)">
      <div class="gallery-caption">Random Generation version 2</div>
    </div>
 <div class="spacer"></div> -->
  </div>

  <!-- ⭐ MINIATURE P5 PROJECT PREVIEWS SECTION -->
<section id="p5-previews" class="container my-5">
  <h2 class="text-center text-white mb-4">p5 Projects</h2>

  <div class="p5-preview-grid">

    <!-- Preview 1 -->
    <div class="p5-preview-item">
      <div id="miniSketch1"></div>
      <p class="text-center text-white small mt-2">Snow!</p>
    </div>

    <!-- Preview 2 -->
    <div class="p5-preview-item">
      <div id="miniSketch2"></div>
      <p class="text-center text-white small mt-2">Hexagons!</p>
    </div>

    <!-- Preview 3 -->
    <div class="p5-preview-item">
      <div id="miniSketch3"></div>
      <p class="text-center text-white small mt-2">Hexagons PLUS Verlet!</p>
    </div>

  </div>
</section>

</main>




<!-- ⭐ IMAGE ENLARGE MODAL -->
<!-- <div id="imgModal" class="modal" onclick="closeModal()">
  <img class="modal-content" id="modalImage">
</div> -->


<!-- ⭐ P5 STARFIELD SCRIPT -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
<script>
  const sketch = (p) => {
    class Star {
      constructor(p, cx, cy, radius, angle, speed, innerR, outerR) {
        this.p = p;
        this.cx = cx;
        this.cy = cy;
        this.radius = radius;
        this.angle = angle;
        this.speed = speed;
        this.innerR = innerR;
        this.outerR = outerR;
      }

      update() { this.angle += this.speed; }

      display() {
        const x = this.cx + this.p.cos(this.angle) * this.radius;
        const y = this.cy + this.p.sin(this.angle) * this.radius;

        for (let i = 0; i < 20; i++) {
          const tA = this.angle - i * 0.1;
          const tx = this.cx + this.p.cos(tA) * this.radius;
          const ty = this.cy + this.p.sin(tA) * this.radius;
          const alpha = this.p.max(0, 100 - i * 5);

          this.p.noStroke();
          this.p.fill(255, alpha);
          this.p.ellipse(tx, ty, 3, 3);
        }

        this.p.push();
        this.p.translate(x, y);
        this.p.rotate(this.angle);
        this.p.fill(153, 0, 76);
        this.p.stroke(100);
        this.p.strokeWeight(1);
        this.drawStar(0, 0, this.innerR, this.outerR, 5);
        this.p.pop();
      }

      drawStar(x, y, r1, r2, n) {
        const angle = this.p.TWO_PI / n;
        const half = angle / 2;

        this.p.beginShape();
        for (let a = 0; a < this.p.TWO_PI; a += angle) {
          this.p.vertex(x + this.p.cos(a) * r2, y + this.p.sin(a) * r2);
          this.p.vertex(x + this.p.cos(a + half) * r1, y + this.p.sin(a + half) * r1);
        }
        this.p.endShape(this.p.CLOSE);
      }
    }

    let stars = [];

    p.setup = () => {
      let canvas = p.createCanvas(window.innerWidth, window.innerHeight);
      canvas.parent("star-container");

      p.angleMode(p.RADIANS);

      for (let i = 0; i < 50; i++) {
        stars.push(new Star(
          p,
          p.width / 2, p.height / 2,
          p.random(50, p.height / 2),
          p.random(p.TWO_PI),
          p.random(0.005, 0.02),
          p.random(5, 10),
          p.random(10, 20)
        ));
      }
    };

    p.draw = () => {
      p.background(20, 20, 20, 25);
      stars.forEach(s => { s.update(); s.display(); });
    };
  };

  new p5(sketch);
</script>

<!-- ⭐ MINIATURE P5 PROJECT PREVIEW SCRIPT 1 -->
<script>
const previewSketch1 = (p) => {
  let partCount = 300;
  let tx = [], ty = [], spdX = [], spdY = [];
  let damping = [], friction = [], r = [], strokeWt = [];
  let fillCol = [], strokeCol = [];
  let ptCount = [];

  let col1, col2;
  let gradientImg;

  p.setup = () => {
    let canvas = p.createCanvas(350, 350);
    canvas.parent("miniSketch1"); // Match your div ID

    col1 = p.color(34, 35, 44);        // dark gray  
    col2 = p.color(132, 135, 152);     // light gray  
    createSkyGradient(col1, col2, p.width, p.height);
    p.image(gradientImg, 0, 0);

    for (let i = 0; i < partCount; i++) {
      ptCount[i] = p.int(p.random(3, 14));
      tx[i] = 0;
      ty[i] = 0;

      spdX[i] = p.random(-2.2, 2.2);
      spdY[i] = p.random(-5);

      damping[i] = p.random(0.4, 0.9);
      friction[i] = p.random(0.4, 0.9);

      r[i] = p.random(2, 9);
      strokeWt[i] = p.random(0.5, 3);

      fillCol[i] = p.color(114, 124, 188);
      strokeCol[i] = p.color(81, 92, 160);
    }
  };

  p.draw = () => {
    p.push();
    p.translate(p.width / 2, p.height / 2);

    for (let i = 0; i < partCount; i++) {
      p.push();
      p.translate(tx[i], ty[i]);

      p.strokeWeight(1);
      p.stroke(0);
      p.fill(255);

      p.ellipse(0, 0, 12, 12);
      p.pop();

      tx[i] += spdX[i];
      ty[i] += spdY[i];

      // Bounce left/right
      if (tx[i] <= -p.width / 2 + 10 || tx[i] >= p.width / 2 - 10) {
        spdX[i] *= -1;
      }

      // Bounce bottom
      if (ty[i] >= p.height / 2 - 10) {
        spdY[i] *= -1;
        spdY[i] *= damping[i];
        spdX[i] *= friction[i];
      }

      // Bounce top
      if (ty[i] <= -p.height / 2 + 10) {
        spdY[i] *= -1;
      }
    }

    p.pop();
  };

  function createSkyGradient(c1, c2, w, h) {
    gradientImg = p.createImage(w, h);
    gradientImg.loadPixels();

    for (let y = 0; y < h; y++) {
      let inter = y / h;
      let c = p.lerpColor(c1, c2, inter);

      for (let x = 0; x < w; x++) {
        let index = (x + y * w) * 4;
        gradientImg.pixels[index] = p.red(c);
        gradientImg.pixels[index + 1] = p.green(c);
        gradientImg.pixels[index + 2] = p.blue(c);
        gradientImg.pixels[index + 3] = 255;
      }
    }

    gradientImg.updatePixels();
  }
};

new p5(previewSketch1);

// <!-- ⭐ MINIATURE P5 PROJECT PREVIEW SCRIPT 2 -->
</script>

<script>
const previewSketch2 = (p) => {
  const width = 350;
  const height = 350;
  let leader, leadSpd, follower, followerSpd;
  const springing = 0.01;
  const springDamping = 0.9;

  p.setup = () => {
    let canvas = p.createCanvas(width, height);
    canvas.parent("miniSketch2");
    p.background(0);
    leader = { x: width / 2, y: height / 2 };
    leadSpd = { x: p.random(-1.5, 1.5), y: p.random(-1.5, 1.5) };
    follower = { x: leader.x, y: leader.y };
    followerSpd = { x: 0, y: 0 };
    p.strokeWeight(1);
  };

  function drawHexagon(x, y, radius, sides = 6) {
    const angle = p.TWO_PI / sides;
    p.beginShape();
    for (let i = 0; i <= sides; i++) {
      const px = x + radius * p.cos(i * angle);
      const py = y + radius * p.sin(i * angle);
      p.vertex(px, py);
    }
    p.endShape(p.CLOSE);
  }

  function drawHexGrid() {
    p.push();
    p.translate(width / 2, height / 2);
    p.rotate(p.radians(75));

    p.stroke("red");
    p.noFill();

    // center cluster
    p.fill("black");
    drawHexagon(0, 0, 100);
    p.fill("white");
    drawHexagon(0, 0, 50);
    p.fill("red");
    p.stroke("black");
    drawHexagon(0, 0, 25);

    // outer rings example (simplified for preview)
    p.stroke("red");
    p.noFill();
    [100, 200, -100, -200].forEach((x) => drawHexagon(x, 0, 50));

    p.pop();
  }

  p.draw = () => {
    p.background(0);

    // Leader random motion
    leadSpd.x += p.random(-1, 1);
    leadSpd.y += p.random(-1, 1);
    leader.x += leadSpd.x;
    leader.y += leadSpd.y;

    if (leader.x > width || leader.x < 0) leadSpd.x *= -1;
    if (leader.y > height || leader.y < 0) leadSpd.y *= -1;

    // Spring motion
    let dx = leader.x - follower.x;
    let dy = leader.y - follower.y;
    dx *= springing;
    dy *= springing;
    followerSpd.x += dx;
    followerSpd.y += dy;
    follower.x += followerSpd.x;
    follower.y += followerSpd.y;
    followerSpd.x *= springDamping;
    followerSpd.y *= springDamping;

    // Draw spring line
    p.stroke(255, 128);
    p.line(leader.x, leader.y, follower.x, follower.y);

    // Leader dot
    p.fill("red");
    p.noStroke();
    p.ellipse(leader.x, leader.y, 5);

    // Follower hex
    p.stroke(255);
    p.fill(255);
    drawHexagon(follower.x, follower.y, 15);

    // Static hex grid
    drawHexGrid();
  };
};

new p5(previewSketch2);
</script>

// <!-- ⭐ MINIATURE P5 PROJECT PREVIEW SCRIPT 3 -->

<script>
const previewSketch3 = (p) => {
  let leader, leadSpd;
  let follower, followerSpd;
  const springing = 0.01;
  const springDamping = 0.9;

  p.setup = () => {
    let canvas = p.createCanvas(350, 350);
    canvas.parent("miniSketch3");
    p.background(0);
    p.strokeWeight(0.75);
    p.smooth();

    leader = p.createVector(0, 0);
    leadSpd = p.createVector(p.random(-1.5, 1.5), p.random(-1.5, 1.5));
    follower = p.createVector(0, 0);
    followerSpd = p.createVector(0, 0);

    // Draw initial hex pattern once for background
    p.push();
    p.translate(p.width / 2, p.height / 2);
    let polyCount = 10; // reduce for preview
    for (let i = 0; i < polyCount; i++) {
      p.noFill();
      hexagon(p, 0, 0, p.random(20, 80), 6);
      p.rotate(p.radians(p.random(1, 180)));
      hexagon(p, 0, 0, p.random(20, 80), 6);
    }
    p.pop();
  };

  p.draw = () => {
    p.push();
    p.translate(p.width / 2, p.height / 2);

    // Leader motion
    leadSpd.add(p.createVector(p.random(-2, 0.1), p.random(-0.2, 0.1)));
    leader.add(leadSpd);

    // Spring follower motion
    let deltaX = leader.x - follower.x;
    let deltaY = leader.y - follower.y;
    deltaX *= springing;
    deltaY *= springing;
    followerSpd.x += deltaX;
    followerSpd.y += deltaY;
    follower.add(followerSpd);
    followerSpd.mult(springDamping);

    // Draw spring line
    p.stroke(255, 0, 0);
    p.line(leader.x, leader.y, follower.x, follower.y);

    // Draw leader
    p.push();
    p.rotate(p.radians(45));
    p.fill(255, 0, 0);
    p.noStroke();
    p.ellipse(leader.x, leader.y, 5, 5);
    p.pop();

    // Draw follower hex
    p.stroke(255);
    p.fill(0);
    hexagon(p, follower.x, follower.y, 15, 6);

    // Constrain leader within bounds
    constrainBounds(p, leader, leadSpd, 175); // half of canvas size

    p.pop();
  };

  function hexagon(p, x, y, r, points) {
    let theta = 0;
    p.beginShape();
    for (let i = 0; i < points; i++) {
      p.vertex(x + r * p.cos(theta), y + r * p.sin(theta));
      theta += p.TWO_PI / points;
    }
    p.endShape(p.CLOSE);
  }

  function constrainBounds(p, obj, spd, limit) {
    if (obj.x > limit) { obj.x = limit; spd.x *= -1; }
    if (obj.x < -limit) { obj.x = -limit; spd.x *= -1; }
    if (obj.y > limit) { obj.y = limit; spd.y *= -1; }
    if (obj.y < -limit) { obj.y = -limit; spd.y *= -1; }
  }
};

new p5(previewSketch3);
</script>


<!-- ⭐ MODAL SCRIPT -->
<!-- <script>
function openModal(src) {
  document.getElementById("modalImage").src = src;
  document.getElementById("imgModal").style.display = "block";
}

function closeModal() {
  document.getElementById("imgModal").style.display = "none";
}
</script> -->


<footer class="container-fluid">
  <%- include('footer'); %>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
